@page "/estrutura";

<MudContainer Class="my-4 px-4">
    @if (_loadingDados)
    {
        <MudAlert Severity="Severity.Warning" ContentAlignment="HorizontalAlignment.Start" Dense="false" Class="p-3">Carregando...</MudAlert>
        <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
    }
    else
    {
        <MudCard Elevation="0" Class="">
            <MudCardContent>
                <MudGrid>
                    <MudItem xs="6" sm="8" md="8" lg="8">
                        <MudStack Row="true" AlignItems="AlignItems.Center">
                            <MudIcon Icon="@Icons.Material.Filled.Insights" Class="mb-1" Size="Size.Large" />
                            <MudText Typo="Typo.h5" Style="font-weight: bold">Telas</MudText>
                        </MudStack>
                    </MudItem>
                    <MudItem xs="6" sm="4" md="4" lg="4" Class="d-flex justify-end">
                        <MudButton 
                            StartIcon="@Icons.Material.Filled.Add"
                            IconSize="Size.Large"
                            Variant="Variant.Filled"
                            Size="Size.Medium"
                            Color="Color.Primary"
                            Href="/system/create"
                            Class="mr-2">

                            Adicionar
                        </MudButton>
                    </MudItem>

                </MudGrid>
            </MudCardContent>
        </MudCard>

        <MudAlert Class="mt-4" Severity="Severity.Normal" NoIcon="true" Variant="Variant.Text" Elevation="0">
            <MudStack Row="true" Justify="Justify.SpaceAround">
                <MudText>Aqui está listado todas as suas telas do seu sistema</MudText>
            </MudStack>
        </MudAlert>

        <MudList Class="mt-2" T="string">
            @foreach (var tela in _telas)
            {
                <MudListItem>
                    <MudGrid Justify="Justify.SpaceAround">

                        <MudItem xs="3" sm="6" md="6" lg="9" Class="align-content-center">
                            <MudText>@tela.NomeTela</MudText>
                        </MudItem>

                        <MudItem xs="3" sm="2" md="2" lg="1">
                            <MudIconButton Icon="@Icons.Material.Filled.Visibility" Color="Color.Info" Href="@($"/estrutura/consultar/{tela.Id}")" />
                        </MudItem>

                        <MudItem xs="3" sm="2" md="2" lg="1">
                            <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Warning" Href="@($"/system/update/{tela.Id}")" />
                        </MudItem>

                        <MudItem xs="3" sm="2" md="2" lg="1">
                            <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error" OnClick="() => DeleteMapTableAsync(tela.Id)" />
                        </MudItem>
                        
                    </MudGrid>
                </MudListItem>
            }
        </MudList>
    }
</MudContainer>
