@page "/register/email"

@attribute [AllowAnonymous]

<MudContainer Class="" MaxWidth="MaxWidth.ExtraExtraLarge">
    <AuthorizeView Context="authContext">
        <Authorized>
            <MudAlert Severity="Severity.Success">Você já está logado como @authContext.User.Identity?.Name.</MudAlert>
        </Authorized>
        <NotAuthorized>
                <MudOverlay @bind-Visible="@loading" DarkBackground="true" Absolute="false">
                    <modulum.Shared.Loading />
                </MudOverlay>
                <EditForm Model="@_registerUserModel" method="post" FormName="Cadastre-se" OnValidSubmit="DoRegisterAsync">
                    <MudCard Outlined="true" Class="@($"{GetResponsivePadding()} mx-auto")" Style="max-width: 700px;">
                        <!--<MudImage Src="logo_512x512.png" Alt="Syki" Elevation="25" Class="rounded-lg mx-20 mt-10 mb-5" />-->
                        <MudCardContent Class="@GetResponsivePadding()">
                            <MudText Typo="Typo.h4" Align="Align.Center" Class="mb-1">Criar uma conta</MudText>
                            <MudText Typo="Typo.subtitle2" Align="Align.Center" Color="Color.Info" Class="mb-4">
                                Informe seu e-mail abaixo para criar sua conta
                            </MudText>
                            <FluentValidationValidator @ref="_fluentValidationValidator" />
                            <FormValidator @ref="_registerFormValidator"></FormValidator>
                            <MudTextField InputType="InputType.Email"
                                          Margin="Margin.Normal"
                                          AutoFocus="true"
                                          Label="Email"
                                          Class="mt-0 pb-3"
                                          OnlyValidateIfDirty="true"
                                          @bind-Value="@_registerUserModel.Email"
                                          Variant="Variant.Text"
                                          Required="true"
                                          RequiredError="Informe!"
                                          For="@(() => _registerUserModel.Email)" />
                            <MudStack Spacing="1" Class="mt-10">
                                <MudButton Size="Size.Large"
                                           OnClick="@DoRegisterAsync"
                                           Variant="Variant.Filled"
                                           Color="Color.Primary"
                                           Class="pa-3">
                                    Avançar
                                </MudButton>
                            </MudStack>
                            <MudStack Spacing="1" Class="mt-10" AlignItems="AlignItems.Start">
                                <MudLink Color="Color.Info" Underline="Underline.None" Href="/login">Já tem conta?</MudLink>
                            </MudStack>
                    </MudCardContent>
                </MudCard>
            </EditForm>
        </NotAuthorized>
    </AuthorizeView>
</MudContainer>